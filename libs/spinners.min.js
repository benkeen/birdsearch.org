var Spinners={version:"3.0.0"};!function(a){function b(a,b){for(var c=1/a,d=[],e=0;a>e;e++)d.push((e+b)*c);return d}function c(a,b){return Math.sqrt(a*a+b*b)}function d(a){return a*Math.PI/180}function e(a){this.element=a}function f(b){b&&(this.element=b,j.remove(b),j.removeDetached(),this._position=0,this._state="stopped",this.setOptions(a.extend({color:"#000",dashes:12,radius:5,height:5,width:1.8,opacity:1,padding:3,fadeOutSpeed:0,pauseColor:"#000",pauseOpacity:.3,rotation:700},arguments[1]||{})),this.drawPosition(0),j.add(this))}var g={scroll:function(a,b){if(!b)return a;var c=a.slice(0,b),d=a.slice(b,a.length);return d.concat(c)},isElement:function(a){return a&&1==a.nodeType},element:{isAttached:function(){function a(a){for(var b=a;b&&b.parentNode;)b=b.parentNode;return b}return function(b){var c=a(b);return!(!c||!c.body)}}()}},h={drawRoundedRectangle:function(b){var c=a.extend({top:0,left:0,width:0,height:0,radius:0},arguments[1]||{}),e=c,f=e.left,g=e.top,h=e.width,i=e.height,j=e.radius;b.beginPath(),b.moveTo(f+j,g),b.arc(f+h-j,g+j,j,d(-90),d(0),!1),b.arc(f+h-j,g+i-j,j,d(0),d(90),!1),b.arc(f+j,g+i-j,j,d(90),d(180),!1),b.arc(f+j,g+j,j,d(-180),d(-90),!1),b.closePath(),b.fill()}},i=function(){function a(a){var b=a;return b.red=a[0],b.green=a[1],b.blue=a[2],b}function b(a){return parseInt(a,16)}function c(c){var d=[];if(0==c.indexOf("#")&&(c=c.substring(1)),c=c.toLowerCase(),""!=c.replace(g,""))return null;3==c.length?(d[0]=c.charAt(0)+c.charAt(0),d[1]=c.charAt(1)+c.charAt(1),d[2]=c.charAt(2)+c.charAt(2)):(d[0]=c.substring(0,2),d[1]=c.substring(2,4),d[2]=c.substring(4));for(var e=0;e<d.length;e++)d[e]=b(d[e]);return a(d)}function d(a,b){var d=c(a);return d[3]=b,d.opacity=b,d}function e(a,b){return"undefined"==typeof b&&(b=1),"rgba("+d(a,b).join()+")"}var f="0123456789abcdef",g=new RegExp("["+f+"]","g"),h=function(){function a(a,b,c){return a=a.toString(c||10),new Array(b-a.length).join("0")+a}return function(b,c,d){return"#"+a(b,2,16)+a(c,2,16)+a(d,2,16)}}();return{hex2rgb:c,hex2fill:e,rgb2hex:h}}();a.extend(Spinners,{enabled:!1,support:{canvas:function(){var b=a("<canvas>")[0];return!(!b.getContext||!b.getContext("2d"))}()},init:function(){(this.support.canvas||window.G_vmlCanvasManager&&window.attachEvent&&-1===navigator.userAgent.indexOf("Opera"))&&(window.G_vmlCanvasManager&&window.G_vmlCanvasManager.init_(document),this.enabled=!0)},create:function(a,b){return e.create(a,b),this.get(a)},get:function(a){return new e(a)},play:function(a){return this.get(a).play(),this},pause:function(a){return this.get(a).pause(),this},toggle:function(a){return this.get(a).toggle(),this},stop:function(a){return this.get(a).stop(),this},remove:function(a){return this.get(a).remove(),this},removeDetached:function(){return j.removeDetached(),this},center:function(a){return this.get(a).center(),this},setOptions:function(a,b){return this.get(a).setOptions(b),this},getDimensions:function(a){var b=j.get(a)[0],c=2*b.getLayout().workspace.radius;return{width:c,height:c}}});var j={spinners:[],get:function(b){if(b){var c=[];return a.each(this.spinners,function(d,e){e&&(g.isElement(b)?e.element==b:a(e.element).is(b))&&c.push(e)}),c}},add:function(a){this.spinners.push(a)},remove:function(b){a(a.map(this.spinners,function(c){return(g.isElement(b)?c.element==b:a(c.element).is(b))?c.element:void 0})).each(a.proxy(function(a,b){this.removeByElement(b)},this))},removeByElement:function(b){var c=this.get(b)[0];c&&(c.remove(),this.spinners=a.grep(this.spinners,function(a){return a.element!=b}))},removeDetached:function(){a.each(this.spinners,a.proxy(function(a,b){b&&b.element&&!g.element.isAttached(b.element)&&this.remove(b.element)},this))}};a.extend(e,{create:function(b){if(b){var c=arguments[1]||{},d=[];return g.isElement(b)?d.push(new f(b,c)):a(b).each(function(a,b){d.push(new f(b,c))}),d}}}),a.extend(e.prototype,{items:function(){return j.get(this.element)},play:function(){return a.each(this.items(),function(a,b){b.play()}),this},stop:function(){return a.each(this.items(),function(a,b){b.stop()}),this},pause:function(){return a.each(this.items(),function(a,b){b.pause()}),this},toggle:function(){return a.each(this.items(),function(a,b){b.toggle()}),this},center:function(){return a.each(this.items(),function(a,b){b.center()}),this},setOptions:function(b){return a.each(this.items(),function(a,c){c.setOptions(b)}),this},remove:function(){return j.remove(this.element),this}}),a.extend(f.prototype,{setOptions:function(b){if(this.options=a.extend({},this.options,b||{}),this.options.radii){var c=this.options.radii;this.options.radius=Math.min(c[0],c[1]),this.options.height=Math.max(c[0],c[1])-this.options.radius}this.options.dashWidth&&(this.options.width=this.options.dashWidth),this.options.speed&&(this.options.duration=1e3*this.options.speed);var d=this._state,e=this._position;switch(this._layout=null,this.build(),e&&e>=this.options.dashes-1&&(this._position=this.options.dashes-1),d){case"playing":this.play();break;case"paused":case"stopped":this.drawPosition(this._position)}this._centered&&this.center(),"paused"==this._state&&this._renderPause()},remove:function(){this.canvas&&(this.pause(),a(this.canvas).remove(),this.canvas=null,this.ctx=null)},build:function(){this.remove();var b=this.getLayout().workspace.radius;return a(document.body).append(this.canvas=a("<canvas>").attr({width:2*b,height:2*b}).css({zoom:1})),window.G_vmlCanvasManager&&G_vmlCanvasManager.initElement(this.canvas[0]),this.ctx=this.canvas[0].getContext("2d"),this.ctx.globalAlpha=this.options.opacity,a(this.element).append(this.canvas),this.ctx.translate(b,b),this},drawPosition:function(a){var b=this.getLayout().workspace,c=g.scroll(b.opacities,-1*a),e=b.radius,f=this.options.dashes,h=d(360/f);this.ctx.clearRect(-1*e,-1*e,2*e,2*e);for(var i=0,j=f;j>i;i++)this.drawDash(c[i],this.options.color),this.ctx.rotate(h)},drawDash:function(a,b){this.ctx.fillStyle=i.hex2fill(b,a);var c=this.getLayout(),d=c.workspace.radius,e=c.dash.position,f=c.dash.dimensions;h.drawRoundedRectangle(this.ctx,{top:e.top-d,left:e.left-d,width:f.width,height:f.height,radius:Math.min(f.height,f.width)/2})},_nextPosition:function(){var b=this.options.rotation/this.options.dashes;this.nextPosition(),this._playTimer=window.setTimeout(a.proxy(this._nextPosition,this),b)},nextPosition:function(){this._position==this.options.dashes-1&&(this._position=-1),this._position++,this.drawPosition(this._position)},play:function(){if("playing"!=this._state){this._state="playing";var b=this.options.rotation/this.options.dashes;return this._playTimer=window.setTimeout(a.proxy(this._nextPosition,this),b),this}},pause:function(){return"paused"!=this._state?(this._pause(),null!==this._layout&&this._renderPause(),this._state="paused",this):void 0},_pause:function(){this._playTimer&&(window.clearTimeout(this._playTimer),this._playTimer=null)},stop:function(){return"stopped"!=this._state?(this._pause(),this._position=0,this.drawPosition(0),this._state="stopped",this):void 0},toggle:function(){return this["playing"==this._state?"pause":"play"](),this},getLayout:function(){if(this._layout)return this._layout;var a=this.options,d=a.dashes,e=a.width,f=a.radius,g=a.radius+a.height,h=Math.max(e,g),i=Math.ceil(Math.max(h,c(g,e/2)));i+=a.padding;var j={workspace:{radius:i,opacities:b(d,this.options.fadeOutSpeed)},dash:{position:{top:i-g,left:i-e/2},dimensions:{width:e,height:g-f}}};return this._layout=j,j},center:function(){var b=2*this.getLayout().workspace.radius;a(this.element.parentNode).css({position:"relative"}),a(this.element).css({position:"absolute",height:b+"px",width:b+"px",top:"50%",left:"50%",marginLeft:-.5*b+"px",marginTop:-.5*b+"px"}),this._centered=!0},_renderPause:function(){var a=this.getLayout().workspace.radius,b=this.options.dashes,c=d(360/b);this.ctx.clearRect(-1*a,-1*a,2*a,2*a);for(var e=0,f=b;f>e;e++)this.drawDash(this.options.pauseOpacity,this.options.pauseColor),this.ctx.rotate(c)}}),Spinners.init(),Spinners.enabled||(e.create=function(){return[]})}(jQuery);