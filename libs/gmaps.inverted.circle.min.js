function InvertedCircle(a){options={visible:!0,map:a.map,center:a.map.getCenter(),radius:2e5,draggable:!1,editable:!1,stroke_weight:1,fill_opacity:.3,fill_color:"#000",always_fit_to_map:!1},options=this.extend_(options,a),this.set("visible",options.visible),this.set("map",options.map),this.set("center",options.center),this.set("radius",options.radius),this.set("old_radius",options.radius),this.set("draggable",options.draggable),this.set("editable",options.editable),this.set("stroke_weight",options.stroke_weight),this.set("fill_opacity",options.fill_opacity),this.set("fill_color",options.fill_color),this.set("always_fit_to_map",options.always_fit_to_map),this.set("position",options.center),this.set("resize_leftright",options.resize_leftright),this.set("resize_updown",options.resize_updown);var b=new google.maps.Marker({visible:!1});b.bindTo("map",this),b.bindTo("draggable",this),b.bindTo("position",this),this.set("center_marker",b),this.drawCircle_(this.get("map"),this.get("position"),this.get("radius")/1e3),this.addSizer_()}InvertedCircle.prototype=new google.maps.MVCObject,InvertedCircle.prototype.position_changed=function(){if(this.set("center",this.get("position")),this.get("donut")){for(var a=new this.Overlay,b=this.drawSpot_(this.getCenter(),this.getRadius()/1e3),c=0;c<b.length;c++)a.push(b[c]);this.set("paths",a),this.getVisible()&&this.get("donut").setPaths(a)}if(this.get("sizer_left")&&this.get("sizer_right")&&this.get("sizer_up")&&this.get("sizer_down")){var d=google.maps.geometry.spherical.computeOffset(this.getCenter(),this.getRadius(),-90),e=google.maps.geometry.spherical.computeOffset(this.getCenter(),this.getRadius(),90),f=google.maps.geometry.spherical.computeOffset(this.getCenter(),this.getRadius(),360),g=google.maps.geometry.spherical.computeOffset(this.getCenter(),this.getRadius(),180);this.get("sizer_left").setPosition(d),this.get("sizer_right").setPosition(e),this.get("sizer_up").setPosition(f),this.get("sizer_down").setPosition(g)}},InvertedCircle.prototype.radius_changed=function(){if(this.get("donut")){for(var a=new this.Overlay,b=this.drawSpot_(this.getCenter(),this.getRadius()/1e3),c=0;c<b.length;c++)a.push(b[c]);this.set("paths",a),this.getVisible()&&this.get("donut").setPaths(a)}if(this.get("sizer_left")&&this.get("sizer_right")&&this.get("sizer_up")&&this.get("sizer_down")){var d=google.maps.geometry.spherical.computeOffset(this.getCenter(),this.getRadius(),-90),e=google.maps.geometry.spherical.computeOffset(this.getCenter(),this.getRadius(),90),f=google.maps.geometry.spherical.computeOffset(this.getCenter(),this.getRadius(),360),g=google.maps.geometry.spherical.computeOffset(this.getCenter(),this.getRadius(),180);this.get("sizer_left").setPosition(d),this.get("sizer_right").setPosition(e),this.get("sizer_up").setPosition(f),this.get("sizer_down").setPosition(g)}},InvertedCircle.prototype.visible_changed=function(){this.setEditable(this.getVisible()),this.setDraggable(this.getVisible()),this.getVisible()?this.get("donut")&&this.get("donut").setPaths(this.get("paths")):this.get("donut")&&this.get("donut").setPaths([])},InvertedCircle.prototype.getMap=function(){return this.get("map")},InvertedCircle.prototype.setVisible=function(a){this.set("visible",a)},InvertedCircle.prototype.getVisible=function(){return this.get("visible")},InvertedCircle.prototype.setCenter=function(a){this.set("position",a)},InvertedCircle.prototype.getCenter=function(){return this.get("position")},InvertedCircle.prototype.getRadius=function(){return this.get("radius")},InvertedCircle.prototype.setRadius=function(a){this.set("radius",a)},InvertedCircle.prototype.getOldRadius=function(){return this.get("old_radius")},InvertedCircle.prototype.setOldRadius=function(a){this.set("old_radius",a)},InvertedCircle.prototype.getEditable=function(){return this.get("editable")},InvertedCircle.prototype.setEditable=function(a){this.set("editable",a)},InvertedCircle.prototype.getDraggable=function(){return this.get("draggable")},InvertedCircle.prototype.setDraggable=function(a){this.set("draggable",a)},InvertedCircle.prototype.getBounds=function(){var a,b,c,d,e,f,g,h=this.getOldRadius(),i=this.getRadius();return b=this.getCenter(),c=new google.maps.LatLngBounds,i>h&&(a=1.1*i,a>6371e3&&(a=6371e3),d=google.maps.geometry.spherical.computeOffset(b,a,-90),e=google.maps.geometry.spherical.computeOffset(b,a,90),f=google.maps.geometry.spherical.computeOffset(b,a,360),g=google.maps.geometry.spherical.computeOffset(b,a,180)),h>i&&(a=i/2.5,0>a&&(a=0),d=google.maps.geometry.spherical.computeOffset(b,a,-90),e=google.maps.geometry.spherical.computeOffset(b,a,90),f=google.maps.geometry.spherical.computeOffset(b,a,360),g=google.maps.geometry.spherical.computeOffset(b,a,180)),c.extend(d),c.extend(e),c.extend(f),c.extend(g),c},InvertedCircle.prototype.addSizer_=function(){var a=new google.maps.MarkerImage(this.get("resize_leftright"),new google.maps.Size(29,29),new google.maps.Point(0,0),new google.maps.Point(15,15)),b=new google.maps.MarkerImage(this.get("resize_updown"),new google.maps.Size(29,29),new google.maps.Point(0,0),new google.maps.Point(15,15)),c=google.maps.geometry.spherical.computeOffset(this.getCenter(),this.getRadius(),-90),d=new google.maps.Marker({position:c,title:"Drag me!",raiseOnDrag:!1,icon:a}),e=google.maps.geometry.spherical.computeOffset(this.getCenter(),this.getRadius(),90),f=new google.maps.Marker({position:e,title:"Drag me!",raiseOnDrag:!1,icon:a}),g=google.maps.geometry.spherical.computeOffset(this.getCenter(),this.getRadius(),360),h=new google.maps.Marker({position:g,title:"Drag me!",raiseOnDrag:!1,icon:b,visible:!1}),i=google.maps.geometry.spherical.computeOffset(this.getCenter(),this.getRadius(),180),j=new google.maps.Marker({position:i,title:"Drag me!",raiseOnDrag:!1,icon:b,visible:!1});d.bindTo("map",this,"map"),d.bindTo("visible",this,"editable"),d.bindTo("draggable",this,"editable"),f.bindTo("map",this,"map"),f.bindTo("visible",this,"editable"),f.bindTo("draggable",this,"editable"),h.bindTo("map",this,"map"),h.bindTo("draggable",this,"editable"),j.bindTo("map",this,"map"),j.bindTo("draggable",this,"editable"),this.set("sizer_left",d),this.set("sizer_right",f),this.set("sizer_up",h),this.set("sizer_down",j);var k=this;google.maps.event.addListener(d,"dragstart",function(){k.setOldRadius(k.getRadius())}),google.maps.event.addListener(d,"mouseover",function(){var a=k.get("sizer_left").getIcon();a.origin=new google.maps.Point(0,29),k.get("sizer_left").setIcon(a)}),google.maps.event.addListener(d,"mouseout",function(){var a=k.get("sizer_left").getIcon();a.origin=new google.maps.Point(0,0),k.get("sizer_left").setIcon(a)}),google.maps.event.addListener(f,"dragstart",function(){k.setOldRadius(k.getRadius())}),google.maps.event.addListener(f,"mouseover",function(){var a=k.get("sizer_right").getIcon();a.origin=new google.maps.Point(0,29),k.get("sizer_right").setIcon(a)}),google.maps.event.addListener(f,"mouseout",function(){var a=k.get("sizer_right").getIcon();a.origin=new google.maps.Point(0,0),k.get("sizer_right").setIcon(a)}),google.maps.event.addListener(d,"drag",function(){radius=google.maps.geometry.spherical.computeDistanceBetween(k.getCenter(),k.get("sizer_left").getPosition()),k.setRadius(radius)}),google.maps.event.addListener(f,"drag",function(){radius=google.maps.geometry.spherical.computeDistanceBetween(k.getCenter(),k.get("sizer_right").getPosition()),k.setRadius(radius)}),google.maps.event.addListener(d,"dragend",function(){radius=google.maps.geometry.spherical.computeDistanceBetween(k.getCenter(),k.get("sizer_right").getPosition()),k.setRadius(radius),k.get("always_fit_to_map")&&k.get("map").fitBounds(k.getBounds())}),google.maps.event.addListener(f,"dragend",function(){radius=google.maps.geometry.spherical.computeDistanceBetween(k.getCenter(),k.get("sizer_right").getPosition()),k.setRadius(radius),k.get("always_fit_to_map")&&k.get("map").fitBounds(k.getBounds())})},InvertedCircle.prototype.addVisibleController_=function(){this.set("circleControlDiv",document.createElement("div")),this.get("circleControlDiv").style.padding="9px",this.get("circleControlDiv").style.cursor="pointer",this.get("circleControlDiv").innerHTML='<div style="direction: ltr; overflow: hidden; text-align: left; position: relative; color: rgb(0, 0, 0); font-family: Arial, sans-serif; -webkit-user-select: none; font-size: 13px; background-color: rgb(255, 255, 255); padding: 4px; border-width: 1px 1px 1px 0px; border-top-style: solid; border-right-style: solid; border-bottom-style: solid; border-top-color: rgb(113, 123, 135); border-right-color: rgb(113, 123, 135); border-bottom-color: rgb(113, 123, 135); -webkit-box-shadow: rgba(0, 0, 0, 0.4) 0px 2px 4px; box-shadow: rgba(0, 0, 0, 0.4) 0px 2px 4px; font-weight: bold; background-position: initial initial; background-repeat: initial initial; " title="Turn On/Off the Circle"><span><div style="width: 16px; height: 16px; overflow: hidden; position: relative; "><img style="position: absolute; left: 0px; top: 0px; -webkit-user-select: none; border: 0px; padding: 0px; margin: 0px; width: auto; height: auto; " src="http://maps.gstatic.com/mapfiles/drawing.png" draggable="false"></div></span></div>',this.get("circleControlDiv").clicked=options.visible;var a=this;google.maps.event.addDomListener(this.get("circleControlDiv"),"click",function(){this.clicked=!this.clicked,this.clicked?(this.innerHTML='<div style="direction: ltr; overflow: hidden; text-align: left; position: relative; color: rgb(0, 0, 0); font-family: Arial, sans-serif; -webkit-user-select: none; font-size: 13px; background-color: rgb(255, 255, 255); padding: 4px; border-width: 1px 1px 1px 0px; border-top-style: solid; border-right-style: solid; border-bottom-style: solid; border-top-color: rgb(113, 123, 135); border-right-color: rgb(113, 123, 135); border-bottom-color: rgb(113, 123, 135); -webkit-box-shadow: rgba(0, 0, 0, 0.4) 0px 2px 4px; box-shadow: rgba(0, 0, 0, 0.4) 0px 2px 4px; font-weight: bold; background-position: initial initial; background-repeat: initial initial; " title="Turn On/Off the Circle"><span><div style="width: 16px; height: 16px; overflow: hidden; position: relative; "><img style="position: absolute; left: 0px; top: 0px; -webkit-user-select: none; border: 0px; padding: 0px; margin: 0px; width: auto; height: auto; " src="http://maps.gstatic.com/mapfiles/drawing.png" draggable="false"></div></span></div>',a.setVisible(!0)):(this.innerHTML='<div style="direction: ltr; overflow: hidden; text-align: left; position: relative; color: rgb(51, 51, 51); font-family: Arial, sans-serif; -webkit-user-select: none; font-size: 13px; background-color: rgb(255, 255, 255); padding: 4px; border-width: 1px 1px 1px 0px; border-top-style: solid; border-right-style: solid; border-bottom-style: solid; border-top-color: rgb(113, 123, 135); border-right-color: rgb(113, 123, 135); border-bottom-color: rgb(113, 123, 135); -webkit-box-shadow: rgba(0, 0, 0, 0.4) 0px 2px 4px; box-shadow: rgba(0, 0, 0, 0.4) 0px 2px 4px; font-weight: normal; background-position: initial initial; background-repeat: initial initial; " title="Turn On/Off the Circle"><span><div style="width: 16px; height: 16px; overflow: hidden; position: relative; "><img style="position: absolute; left: 0px; top: -160px; -webkit-user-select: none; border: 0px; padding: 0px; margin: 0px; width: auto; height: auto; " src="http://maps.gstatic.com/mapfiles/drawing.png" draggable="false"></div></span></div>',a.setVisible(!1))}),this.get("circleControlDiv").index=1,this.get("map").controls[google.maps.ControlPosition.LEFT_TOP].push(this.get("circleControlDiv"))},InvertedCircle.prototype.extend_=function(a,b){if(arguments.length>2)for(var c=1;c<arguments.length;c++)extend(a,arguments[c]);else for(var d in b)a[d]=b[d];return a},InvertedCircle.prototype.drawSpot_=function(a,b){var c,d,e,f,g,h,i=Math.PI/180,j=180/Math.PI,k=6371,l=[],m=!1,n=1,o=[],p=128,q=b/k*j,r=q/Math.cos(a.lat()*i);for(a.lng()>0&&(n=-1),1==n?(c=0,d=p+1):(c=p+1,d=0),e=c;1==n?d>e:e>d;e+=n)f=Math.PI*(e/(p/2)),g=a.lat()+q*Math.sin(f),h=a.lng()+r*Math.cos(f),(-1===n&&0>h||1===n&&h>0)&&(h=0,m=!0),o.push(new google.maps.LatLng(g,h));if(l.push(o),m){for(o=[],n=-n,1==n?(c=0,d=p+1):(c=p+1,d=0),e=c;1==n?d>e:e>d;e+=n)f=Math.PI*(e/(p/2)),g=a.lat()+q*Math.sin(f),h=a.lng()+r*Math.cos(f),(-1===n&&0>h||1===n&&h>0)&&(h=0,m=!0),o.push(new google.maps.LatLng(g,h));l.push(o)}return l},InvertedCircle.prototype.Overlay=function(){var a=86,b=180,c=b-1e-10;return[[new google.maps.LatLng(-a,-b),new google.maps.LatLng(a,-b),new google.maps.LatLng(a,0),new google.maps.LatLng(-a,0)],[new google.maps.LatLng(-a,c),new google.maps.LatLng(a,c),new google.maps.LatLng(a,0),new google.maps.LatLng(-a,0)]]},InvertedCircle.prototype.drawCircle_=function(a,b,c){for(var d=new this.Overlay,e=this.drawSpot_(b,c),f=0;f<e.length;f++)d.push(e[f]);var g=new google.maps.Polygon({strokeWeight:this.stroke_weight,fillColor:this.fill_color,fillOpacity:this.fill_opacity,map:a});this.set("paths",d),this.set("donut",g),this.getVisible()&&this.get("donut").setPaths(d)};